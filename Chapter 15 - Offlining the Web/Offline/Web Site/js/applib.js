!function(a,b){"use strict";var c=function(a,b){var d,e,f=new c.fn.init(a,b);if(!a)return f.length=0,f;if("string"==typeof a)for(d=b&&b.nodeType?b.querySelectorAll(a):document.querySelectorAll(a),f.length=d.length,f.selector=a,e=0;e<d.length;e++)f[e]=d[e];else a.nodeType&&(f[0]=a,f.length=a.length?a.length:1);return f};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.2",length:0,context:b,selector:"",rclass:/[\t\r\n]/g,trim:function(a){return null==a?"":a.trim(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},extend:function(){var a,c,d,e,f=arguments[0]||{},g=1,h=arguments.length;for(g=1;h>g;g++)if(null!==(d=arguments[g]))for(a in d)e=f[a],c=d[a],f!==c&&c!==b&&(f[a]=c);return f},merge:function(){},each:function(a,c){if(c===b&&(c=a,a=this),this.isArray(a))for(var d=0,e=a.length;e>d;d++);},map:function(a,b){var c,d=0,e=a.length,f=this.isArray(a),g=[];if(f)for(;e>d;d++)c=b(a[d],d,arg),null!=c&&(g[g.length]=c);else for(d in a)c=b(a[d],d,arg),null!=c&&(g[g.length]=c);return g},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},noop:function(){}},c.fn.init.prototype=c.fn,a.dollarbill=a.$=c}(window),dollarbill.fn.parseLocalStorage=function(a){var b=localStorage.getItem(a);return b?JSON.parse(b)||{}:{}},dollarbill.fn.removeClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)for(var c=a.split(" "),d=0;d<c.length;d++)""!==c[d]&&this[b].classList.remove(c[d]);return this}},dollarbill.fn.addClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)for(var c=a.split(" "),d=0;d<c.length;d++)""!==c[d]&&this[b].classList.add(c[d]);return this}},dollarbill.fn.hasClass=function(a){return a&&"string"==typeof a?this[0].classList.contains(a):this},dollarbill.fn.toggleClass=function(a){if(a&&"string"==typeof a){for(var b=0;b<this.length;b++)this[b].classList.toggle(a);return this}},dollarbill.fn.show=function(a){a=a||"block";for(var b=0;b<this.length;b++)this[b].style.display=a},dollarbill.fn.hide=function(){for(var a=0;a<this.length;a++)this[a].style.display="none"},dollarbill.fn.toggle=function(a){a=a||"block";for(var b=0;b<this.length;b++){var c=this[b];c.style.display=""===c.style.display||"none"===c.style.display?a:"none"}},dollarbill.fn.getVendorPropertyName=function(a){var b,c,d=["Moz","Webkit","O","ms"],e=document.createElement("div"),f=a.charAt(0).toUpperCase()+a.substr(1);if(a in e.style)return a;for(c=0;c<d.length;++c)if(b=d[c]+f,b in e.style)return b},dollarbill.fn.hideURLBar=function(){var a=window,b=document,c=b.body,d=document.height>a.innerHeight?document.height:a.innerHeight,e=a.pageYOffset||"CSS1Compat"===b.compatMode&&b.documentElement.scrollTop||b.body.scrollTop||0;430>d&&(d=430),d>c.clientHeight&&(c.style.height=d+"px"),window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,e)},0)})},dollarbill.fn.transitionend={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd"},dollarbill.fn.checkTransform3dSupport=function(){var a=document.createElement("div"),b=this.getVendorPropertyName("transform");return a.style[b]="",a.style[b]="rotateY(90deg)",""!==a.style[b]},dollarbill.fn.buildVendorNames=function(){return{transition:this.getVendorPropertyName("transition"),transitionDelay:this.getVendorPropertyName("transitionDelay"),transform:this.getVendorPropertyName("transform"),transformOrigin:this.getVendorPropertyName("transformOrigin"),transform3d:this.checkTransform3dSupport()}},dollarbill.fn.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},dollarbill.fn.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},dollarbill.fn.loadScript=function(a,b,c){if(document.getElementById(a))c();else{var d=document.createElement("script");d.type="text/javascript",d.id=a,d.readyState?d.onreadystatechange=function(){("loaded"===d.readyState||"complete"===d.readyState)&&(d.onreadystatechange=null,c())}:d.onload=function(){c()},d.src=b,document.body.appendChild(d)}},!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,twoHundo.test(a.request.status)?b(a.request):c(a.request)),void 0)}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"==typeof j.onreadystatechange||l||(j.event="onclick",j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),k=1,void 0)},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest}),function(a,b){"use strict";var c=function(a){var b=new c.fn.init(a);return b.settings=$().extend({},b.settings,a),b.data=b.settings.data||rqData(),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",rtRoot:"http://api.rottentomatoes.com/api/public/v1.0/",apiKey:"q7g5vgxauv72mgvghgtbpdbc",defaultPageLimit:12,data:b,TopBoxOfficeMovies:function(a,b,c){return this.getRottenTomatoesList("box_office",a,b,c)},OpeningMovies:function(a,b,c){return this.getRottenTomatoesList("opening",a,b,c)},InTheatersMovies:function(a,b,c){return this.getRottenTomatoesList("in_theaters",a,b,c)},ComingSoonMovies:function(a,b,c){return this.getRottenTomatoesList("upcoming",a,b,c)},SearchMovies:function(a,b,c,d){b=b||1,a=a||this.defaultPageLimit;var e=this,f=e.rtRoot+"movies.json?apikey="+this.apiKey+"&q="+c+"&page_limit="+a+"&page="+b;return e.data.getJSONP(f,{success:function(a){e.MoviesCallback.call(e,a,d)}})},loadMovieDetails:function(a,b){var c=this,d=c.rtRoot+"movies/"+a+".json?apikey="+c.apiKey;return c.data.getJSONP(d,{success:b})},storeMoviesInStorage:function(b){if(b&&b.length){var c,d=this,e=0,f="",g=a.localStorage;for(e=0;e<b.length;e++)c=b[e],f=d.rtRoot+"movies/"+c.id+".json?apikey="+d.apiKey+"jsonp",g.setItem(f,JSON.stringify(c)),g.setItem(f+"cachettl",+new Date+2592e5)}},setMoviePoster:function(a){a.length||(a=[a]);for(var b=0;b<a.length;b++)a[b].poster=a[b].posters.profile;return a},MoviesCallback:function(a,b){var c=this;(a.total>0||a.movies.length>1)&&(a.movies=c.setMoviePoster(a.movies)),b&&b.call(c,a),c.storeMoviesInStorage(a.movies)},getRottenTomatoesList:function(a,b,c,d){var e=this;return this.getRottenTomatoes(a,b,c,function(a){e.MoviesCallback.call(e,a,d)})},getRottenTomatoes:function(a,b,c,d){var e=this,f=e.rtRoot+"lists/movies/"+a+".json?apikey="+e.apiKey+"&page_limit="+(b||e.defaultPageLimit)+"&page="+(c||1);return e.data.getJSONP(f,{success:d})}},c.fn.init.prototype=c.fn,a.RottenTomatoes=c}(window),function(a){var b=[{id:"fake1",name:"The Mystic",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"The Marquee",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"The Pantagees",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"Regal 22",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"Rialto 16",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"AMC Stadium 20",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"AMC Loews Universal Cineplex 20",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"Regal Pointe Stadium 20 & IMAX",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"Touchstar Cinemas Southchase 7",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""},{id:"fake1",name:"Cinemark Festival Bay Mall",address:"123 fake st",city:"anytown",state:"any state",postal:"12345",phone:"4445551212",latitude:"",longitude:""}],c=["11:45 AM","1:25 PM","3:30 PM","4:55 PM","5:10 PM","6:35 PM","7:20 PM","8:35 PM","9:45 PM","10:10 PM"],d=function(){return new d.fn.init};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.1",nearbyTheaters:function(a,c){for(var d,e=this,f=0;f<b.length;f++)d=e.getRandomPoistion(a,c),b[f].latitude=d.latitude,b[f].longitude=d.longitude;return b},theaterShowTimes:function(){return c},getRandomPoistion:function(a,b){var c=Math.floor(5500*Math.random()+1)/1e5,d=Math.floor(6500*Math.random()+1)/1e5,e=Math.round(Math.random()),f=Math.round(Math.random()),g={};return 0===e&&(c=parseFloat("-"+c)),0===f&&(d=parseFloat("-"+d)),g.latitude=a+c,g.longitude=b+d,g}},d.fn.init.prototype=d.fn,a.fakeTheaters=d}(window),function(a,b){var c=function(a,b){var d=new c.fn.init;return d.movieSrc=a,d.theaterSrc=b,d};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",movieSrc:b,theaterSrc:b,nearbyTheaters:function(a,b){return this.theaterSrc?this.theaterSrc.nearbyTheaters(a,b):void 0},theaterShowTimes:function(a,b){return this.theaterSrc?this.theaterSrc.theaterShowTimes(a,b):void 0},TopBoxOfficeMovies:function(a,b,c){return this.movieSrc?this.movieSrc.TopBoxOfficeMovies(a,b,c):void 0},OpeningMovies:function(a,b,c){return this.movieSrc?this.movieSrc.OpeningMovies(a,b,c):void 0},InTheatersMovies:function(a,b,c){return this.movieSrc?this.movieSrc.InTheatersMovies(a,b,c):void 0},ComingSoonMovies:function(a,b,c){return this.movieSrc?this.movieSrc.ComingSoonMovies(a,b,c):void 0},SearchMovies:function(a,b,c,d){return this.movieSrc?this.movieSrc.SearchMovies(a,b,c,d):void 0},loadMovieDetails:function(a,b){if(this.movieSrc){var c=this;this.movieSrc.loadMovieDetails(a,function(a){b&&b(c.mergeInFakeShowtimes(a))})}},mergeInFakeShowtimes:function(a){var c=[{theater:"The Mystic",showtimes:["12:20","3:05","5:45","7:50","10:10"]},{theater:"The Marquee",showtimes:["12:05","2:35","4:45","6:50","8:10","10:45"]},{theater:"The Pantagees",showtimes:["12:05","2:35","4:45","6:50","8:10","10:45"]}],d=0;if(a.length!=b)for(d=0;d<a.length-1;d++)a[d].showtimes=c;else a.showtimes=c;return a}},c.fn.init.prototype=c.fn,a.movieData=c}(window),function(a,b){"use strict";var c=function(a){var b=new c.fn.init(a);return b.settings=$().extend({},b.settings,a),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.2",getTemplates:function(a){var b,c,d=document.querySelectorAll("script[type='"+this.settings.templateType+"']"),e=$().parseLocalStorage("templates");for(b=0;b<d.length;b++)c=d[b],e[c.id]=c.innerHTML.replace(/(\r\n|\n|\r)/gm,""),a&&c.parentNode&&c.parentNode.removeChild(c);return localStorage.setItem("templates",JSON.stringify(e)),e},getTemplate:function(a){return"<script type='"+this.settings.templateType+"'>"+localStorage.getItem(a)+"</script>"},updateViews:function(a){var b,c=document.querySelectorAll(a);for(b=0;b<c.length;b++)this.saveViewToStorage(c[b])},saveViewToStorage:function(a){"string"==typeof a&&(a=document.getElementById(a)),a&&(this.storeViewInfo(this.parseViewInfo(a)),!a.parentNode||a.className.search(this.settings.currentClass)>-1||a.parentNode.removeChild(a),a=b)},parseViewInfo:function(a){return{pageId:a.id,viewTitle:a.hasAttribute("data-title")?a.getAttribute("data-title"):this.settings.defaultTitle,tranistion:a.hasAttribute("data-transition")?a.getAttribute("data-transition"):"",content:a.outerHTML}},storeViewInfo:function(a){a=$().extend({},this.pageSettings,a),localStorage.setItem(a.pageId,JSON.stringify(a))},getViewData:function(b){var c,d=localStorage[b];return d||(c=document.getElementById(b),c&&(this.saveViewToStorage(c),d=a.localStorage[b])),d?JSON.parse(d):void 0},settings:{viewSelector:".content-pane",defaultTitle:"A Really Cool SPA App",deferredTimeKey:"lastDeferredTime",templateType:"text/x-mustache-template",currentClass:"current"},pageSettings:{pageId:"",url:"",css:b,js:b,templates:"",content:"",defaultTemplate:"#DefaultViewTemplate"}},c.fn.init.prototype=c.fn,a.backpack=c}(window),function(a,b){"use strict";var c=function(a,b){return new c.fn.init(a,b)};return c.fn=c.prototype={constructor:c,init:function(b,c){if(!b)return b;"string"==typeof b&&(b=document.querySelectorAll(b)),this.node="length"in b?b:[b];var d=$();return this.settings=d.extend({},this.settings,c),this.support=d.buildVendorNames(),this.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",this.hasMouse="ontouchstart"in a&&"onmousedown"in a,this.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown",this.touchEnd="pointer"===this.touchType?"MSPointerUp":"touch"===this.touchType?"touchend":"mouseup",this.touchOut="pointer"===this.touchType?"MSPointerOut":"touch"===this.touchType?"touchcancel":"mouseout",this.touchMove="pointer"===this.touchType?"MSPointerMove":"touch"===this.touchType?"touchmove":"mousemove",this.touchCancel="pointer"===this.touchType?"MSPointerCancel":"touch"===this.touchType?"touchcancel":"mouseout",this.hasmsGesture?this.setupMSGesture():(this.setUpTouchGestures(),this.setupTouch()),this},version:"0.0.6",hasMouse:"",touchType:"",touchStart:"",touchEnd:"",touchOut:"",touchMove:"",touchCancel:"",hasmsGesture:a.MSGesture,setUpTouchGestures:function(){var a=this;try{[].forEach.call(this.node,function(b){b.addEventListener("gesturestart",function(){}),b.addEventListener("gesturechange",function(b){a.gestureChange.call(a,b)}),b.gStartScale=1,b.gStartRotation=0})}catch(b){return console.error("setUpTouchGestures is broken \r\n"+tl.innerText),!1}},setupMSGesture:function(){var a=this,b=this.settings;try{[].forEach.call(this.node,function(c){var d=new MSGesture;d&&(d.target=c,c.addEventListener("MSPointerDown",function(e){d.target&&(d.addPointer(e.pointerId),a.setupSwipe(e,c,b))}),c.addEventListener("MSGestureChange",function(b){a.msGestureChange.call(a,b)}),c.addEventListener("MSPointerDown",function(d){a.doDoubleTap(d,c,b)}),c.addEventListener("MSGestureEnd",function(b){a.endGesture(b)}))})}catch(c){return!1}},endGesture:function(){this.swipping=!1,this.swipeX=null,this.swipeY=null},swipeRightCallback:function(){},swipeLeftCallback:function(){},swipeUpCallback:function(){},swipeDownCallback:function(){},moveCallback:function(){},moveHorizontalCallback:function(){},moveVerticalCallback:function(){},rotateCallback:function(){},scaleCallback:function(){},tapCallback:function(){},doubleTapCallback:function(){},processGestureChange:function(a,b){var c=this,d=this.settings,e=a.target;e.hasAttribute(d.rotateIndicator)&&Math.abs(a.rotation)>d.rotateThreshold&&(d.autoRotate&&(e.style.transform=b.rotate(180*a.rotation/Math.PI)),this.rotateCallback(a,b)),e.hasAttribute(d.scaleIndicator)&&Math.abs(a.scale)>d.scaleThreshold&&(d.autoScale&&(e.style.transform=b.scale(a.scale)),this.scaleCallback(a,b)),e.hasAttribute(d.moveIndicator)&&(Math.abs(a.translationX)>d.moveThreshold||Math.abs(a.translationY)>d.moveThreshold)&&(d.autoMove&&(e.style.transform=b.translate(a.translationX,a.translationY,0)),this.moveCallback(a,b)),e.hasAttribute(d.horizontalIndicator)&&Math.abs(a.translationX)>d.moveThreshold&&(d.autoHorizontalMove&&(a.target.style.transform=b.translate(a.translationX,0,0)),this.moveHorizontalCallback(a,b)),e.hasAttribute(d.verticalIndicator)&&Math.abs(a.translationY)>d.moveThreshold&&(d.autoVerticalMove&&(a.target.style.transform=b.translate(0,a.translationY,0)),this.moveVerticalCallback(a,b)),c.processSwipe(e,a,d,b)},processSwipe:function(a,b,c,d){var e=this;if(d=d||{},a.hasAttribute(c.swipeRight)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.hasAttribute(c.swipeRightInit)&&b.clientX>e.swipeX&&b.clientX-e.swipeX>c.swipeRightThreshold&&(e.swipping||(e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeRightCallback(b,d)))),a.hasAttribute(c.swipeLeft)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.hasAttribute(c.swipeLeftInit)&&b.clientX<e.swipeX&&b.clientX-e.swipeX<c.swipeLeftThreshold&&(e.swipping||(e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeLeftCallback(b,d)))),a.hasAttribute(c.swipeUp)&&!e.swipping)if(null===e.swipeY)e.swipeY=b.clientY;else{var f=b.clientY>=0?b.clientY:0;a.hasAttribute(c.swipeUpInit)&&b.clientY<e.swipeY&&f-e.swipeY<c.swipeUpThreshold&&(e.swipping||(e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeUpCallback(b,d)))}a.hasAttribute(c.swipeDown)&&!e.swipping&&(null===e.swipeY?e.swipeY=b.clientY:a.hasAttribute(c.swipeDownInit)&&b.clientY>e.swipeY&&b.clientY-e.swipeY>c.swipeDownThreshold&&(e.swipping||(e.swipping=!0,e.swipeY=null,e.swipeX=null,e.swipeDownCallback(b,d))))},swipping:!1,swipeX:null,swipeY:null,gestureChange:function(a){var b=a.target,c=this.settings;b.hasAttribute(c.rotateIndicator)&&Math.abs(a.rotation)>c.rotateThreshold&&this.rotateCallback(a),b.hasAttribute(c.scaleIndicator)&&Math.abs(a.scale)>c.scaleThreshold&&this.scaleCallback(a)},msGestureChange:function(b){a.MSCSSMatrix&&this.processGestureChange(b,new MSCSSMatrix(b.target.style.transform))},calculateTranslation:function(a,b){return{translationX:b.x-a.x,translationY:b.y-a.y}},setupIndicator:function(a,c,d,e,f){var g=this,h=g.settings;a!==b&&(g[c]=a),d&&(g.settings[e]=d),[].forEach.call(g.node,function(a){a.setAttribute(h[f],"true")})},PreventDefaultManipulationAndMouseEvent:function(a){return a.preventDefault?(a.preventDefault(),void 0):a.preventManipulation?(a.preventManipulation(),void 0):a.preventMouseEvent?(a.preventMouseEvent(),void 0):void 0},getTouchPoints:function(a){var b,c=this,d="undefined"!=typeof a.changedTouches?a.changedTouches:[a],e=d[d.length-1];return b="pointer"===c.touchType?{x:e.x,y:e.y}:"touch"===c.touchType?{x:e.pageX,y:e.pageY}:{x:a.pageX,y:a.pageY}},node:b,div:b,support:{},doDoubleTap:function(a,b,c){var d=this;b.hasAttribute(c.doubleTapIndicator)&&b.hasAttribute(c.doubleTapStart)&&(b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart)),d.doubleTapCallback(a)),b.hasAttribute(c.doubleTapIndicator)&&!b.hasAttribute(c.doubleTapStart)&&b.setAttribute(c.doubleTapStart,setTimeout(function(){b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart))},c.doubleTapThreshold))},setupSwipe:function(a,b,c){var d=this;b.hasAttribute(c.swipeRight)&&(b.removeAttribute(c.swipeRightEnd),b.hasAttribute(c.swipeRightInit)||b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a)))),b.hasAttribute(c.swipeLeft)&&(b.removeAttribute(c.swipeLeftEnd),b.hasAttribute(c.swipeLeftInit)||b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a)))),b.hasAttribute(c.swipeUp)&&(b.removeAttribute(c.swipeUpEnd),b.hasAttribute(c.swipeUpInit)||b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a)))),b.hasAttribute(c.swipeDown)&&(b.removeAttribute(c.swipeDownEnd),b.hasAttribute(c.swipeDownInit)||b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))},setupTouch:function(){var a=this,b=this.settings;[].forEach.call(this.node,function(c){var d=function(d){a.touchMoveHandler.call(a,d,c,b)},e=function(d){a.endTouchHandler.call(a,d,c,b)},f=function(d){a.startTouchHandler.call(a,d,c,b)};c.addEventListener(a.touchStart,f),c.addEventListener(a.touchMove,d),c.addEventListener(a.touchEnd,e),c.addEventListener(a.touchCancel,e),c.addEventListener("mouseout",e),c.addEventListener("mouseup",e),c.addEventListener(a.touchEnd,function(){}),c.addEventListener("mouseout",function(){}),c.addEventListener("mouseup",function(){}),c.addEventListener(a.touchCancel,function(){}),c.addEventListener(a.touchOut,function(){}),a.hasMouse&&(c.addEventListener("mousedown",f),c.addEventListener("mousemove",d),c.addEventListener("mouseup",e))})},startTouchHandler:function(a,b,c){var d=this;c=this.settings,b.hasAttribute(c.moveIndicator)&&(b.removeAttribute(c.moveTouchEnded),b.hasAttribute(c.moveTouchInitial)||b.setAttribute(c.moveTouchInitial,JSON.stringify(d.getTouchPoints(a)))),b.hasAttribute(c.horizontalIndicator)&&(b.removeAttribute(c.horizontalTouchEnd),b.hasAttribute(c.horizontalTouchInit)||b.setAttribute(c.horizontalTouchInit,JSON.stringify(d.getTouchPoints(a)))),b.hasAttribute(c.verticalIndicator)&&(b.removeAttribute(c.verticalTouchEnd),b.hasAttribute(c.verticalTouchInit)||b.setAttribute(c.verticalTouchInit,JSON.stringify(d.getTouchPoints(a)))),d.setupSwipe(a,b,c),b.hasAttribute(c.tapIndicator)&&!b.hasAttribute(c.tapStart)&&b.setAttribute(c.tapStart,setTimeout(function(){clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.doubleTapStart)},700)),d.doDoubleTap(a,b,c)},endTouchHandler:function(a,b,c){var d=this;c=this.settings,b.hasAttribute(c.moveTouchInitial)&&b.setAttribute(c.moveTouchEnded,"true"),b.hasAttribute(c.horizontalIndicator)&&b.setAttribute(c.horizontalTouchEnd,"true"),b.hasAttribute(c.verticalIndicator)&&b.setAttribute(c.verticalTouchEnd,"true"),b.hasAttribute(c.swipeRight)&&(d.swipping=!1,b.setAttribute(c.swipeRightEnd,"true"),b.removeAttribute(c.swipeRightInit)),b.hasAttribute(c.swipeLeft)&&(d.swipping=!1,b.setAttribute(c.swipeLeftEnd,"true"),b.removeAttribute(c.swipeLeftInit)),b.hasAttribute(c.swipeUp)&&(d.swipping=!1,b.setAttribute(c.swipeUpEnd,"true"),b.removeAttribute(c.swipeUpInit)),b.hasAttribute(c.swipeDown)&&(d.swipping=!1,b.setAttribute(c.swipeDownEnd,"true"),b.removeAttribute(c.swipeDownInit)),b.hasAttribute(c.tapIndicator)&&b.hasAttribute(c.tapStart)&&(d.tapCallback(a),clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.tapStart))},touchMoveHandler:function(a,b,c){var d=this;c=this.settings,b.hasAttribute(c.moveIndicator)&&!b.hasAttribute(c.moveTouchEnded)&&b.hasAttribute(c.moveTouchInitial)&&(e=JSON.parse(b.getAttribute(c.moveTouchInitial)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),b.style[d.support.transform]="translate3D("+g.translationX+"px, "+g.translationY+"px, 0)");var e,f,g;b.hasAttribute(c.horizontalIndicator)&&!b.hasAttribute(c.horizontalTouchEnd)&&b.hasAttribute(c.horizontalTouchInit)&&(console.log("should -horizontal move"),e=JSON.parse(b.getAttribute(c.horizontalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),Math.abs(g.translationX)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D("+g.translationX+"px, 0, 0)")),b.hasAttribute(c.verticalIndicator)&&!b.hasAttribute(c.verticalTouchEnd)&&b.hasAttribute(c.verticalTouchInit)&&(e=JSON.parse(b.getAttribute(c.verticalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),Math.abs(g.translationY)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D(0, "+g.translationY+"px, 0)")),(b.hasAttribute(c.swipeRightInit)||b.hasAttribute(c.swipeLefttInit)||b.hasAttribute(c.swipeUpInit)||b.hasAttribute(c.swipeDownInit))&&(a.touches&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY),d.processSwipe(b,a,c))},swipeRight:function(a,b){return this.setupIndicator(a,"swipeRightCallback",b,"swipeRightThreshold","swipeRight"),this},swipeLeft:function(a,b){return this.setupIndicator(a,"swipeLeftCallback",b,"swipeLeftThreshold","swipeLeft"),this},swipeUp:function(a,b){return this.setupIndicator(a,"swipeUpCallback",b,"swipeUpThreshold","swipeUp"),this},swipeDown:function(a,b){return this.setupIndicator(a,"swipeDownCallback",b,"swipeDownThreshold","swipeDown"),this},move:function(a){return this.setupIndicator(a,"moveCallback",0,"","moveIndicator"),this},horizontalMove:function(a){return this.setupIndicator(a,"moveHorizontalCallback",0,"","horizontalIndicator"),this},verticalMove:function(a){return this.setupIndicator(a,"moveVerticalCallback",0,"","verticalIndicator"),this
},rotate:function(a){return this.setupIndicator(a,"rotateCallback",0,"","rotateIndicator"),this},scale:function(a){return this.setupIndicator(a,"scaleCallback",0,"","scaleIndicator"),this},tap:function(a){var b=this;return a||(a=function(){}),b.hasmsGesture?[].forEach.call(this.node,function(b){b.addEventListener("MSGestureTap",a,!1)}):this.setupIndicator(a,"tapCallback",0,"","tapIndicator"),this},dblTap:function(a){var b=this.settings;return a&&(b.doubleTapCallback=a),this.setupIndicator(a,"doubleTapCallback",0,"","doubleTapIndicator"),this},tapHold:function(a,b,c){var d=this;return a&&(d.tapHoldBeginCallback=a),this.hasmsGesture?(d.tapHoldBeginCallback=a,d.tapHoldEndCallback=b,d.tapHoldCancelCallback=c,[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener("MSGestureHold",function(a){d.tapHoldCallback.call(d,a)},!1)})):[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener(d.touchStart,function(b){d.setupTapHold(a,b)}),d.hasMouse&&a.addEventListener("mousedown",function(b){d.setupTapHold(a,b)})},!1),this},preventTapHoldContext:function(a){a.addEventListener("contextmenu",function(){},!1)},setupTapHold:function(a,b){var c,d=this;c=setTimeout(function(){d.tapHoldBeginCallback.call(d,b),clearTimeout(c)},500),a.addEventListener(d.touchEnd,function(){clearTimeout(c)},!1),a.addEventListener(d.touchCancel,function(){clearTimeout(c)},!1)},tapHoldBeginCallback:function(){},tapHoldEndCallback:function(){},tapHoldCancelCallback:function(){},tapHoldCallback:function(a){var b=this;a.detail&a.MSGESTURE_FLAG_BEGIN&&b.tapHoldBeginCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_END&&b.tapHoldEndCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_CANCEL&&b.tapHoldCancelCallback.call(b,a)},settings:{allowPageScroll:!0,logging:!1,swipeRightThreshold:25,swipeLeftThreshold:-25,swipeUpThreshold:-25,swipeDownThreshold:25,moveThreshold:0,rotateThreshold:0,scaleThreshold:0,doubleTapThreshold:700,tapIndicator:"data-tap",tapStart:"data-tap-start",tapEnded:"data-tap-end",doubleTapIndicator:"data-dbltap",doubleTapStart:"data-dbltap-start",doubleTapEnded:"data-dbltap-end",rotateIndicator:"data-rotate",rotateEnded:"data-rotate-ended",rotateInitial:"data-rotate-initial",scaleIndicator:"data-scale",scaleEnded:"data-scale-ended",scaleInitial:"data-scale-initial",moveIndicator:"data-move",moveTouchEnded:"data-move-touch-ended",moveTouchInitial:"data-move-touch-initial",swipeRight:"data-swiperight",swipeRightInit:"data-swiperight-init",swipeRightEnd:"data-swiperight-end",swipeLeft:"data-swipeleft",swipeLeftInit:"data-swipeLeft-init",swipeLeftEnd:"data-swipeleft-end",swipeUp:"data-swipeup",swipeUpInit:"data-swipeup-init",swipeUpEnd:"data-swipeup-end",swipeDown:"data-swipedown",swipeDownInit:"data-swipedown-init",swipeDownEnd:"data-swipedown-end",horizontalIndicator:"data-move-horizontal",horizontalTouchInit:"data-horizontal-touch-initial",horizontalTouchEnd:"data-horizontal-touch-ended",verticalIndicator:"data-move-vertical",verticalTouchInit:"data-vertical-touch-initial",verticalTouchEnd:"data-vertical-touch-ended",autoMove:!0,autoRotate:!0,autoScale:!0,autoHorizontalMove:!0,autoVerticalMove:!0}},c.fn.init.prototype=c.fn,a.deeptissue=c}(window),function(a,b){"use strict";var c=function(a,b){if(!a)return a;if("string"==typeof a&&(a=document.querySelector(a),!a))return a;"length"in a&&(a=a[0]);var d=new c.fn.init,e=$(),f=d.settings=e.extend({},d.settings,b);return d.support=e.buildVendorNames(),d.support.transitionEnd=d.eventNames[d.support.transition]||null,d.setupToolbarElements(a,f),d.applyTransitionEnd(),d.setToolbarMenu(f.menuItems),d};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.4",toolbar:b,topMenu:b,subMenu:b,expandTarget:b,hasMouse:"",touchType:"",touchStart:"",div:b,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},setToolbarMenu:function(b){var c=0,d="",e="",f=this,g=f.settings;if(f.expandToolbar(!0),f.topMenu.innerHTML="",f.subMenu.innerHTML="",b.topMenu)for(c=0;c<b.topMenu.length;c++)d+=f.parseMenuItem(b.topMenu[c],g.toolbarItemTemplate);if(b.subMenu)for(c=0;c<b.subMenu.length;c++)e+=f.parseMenuItem(b.subMenu[c],g.subMenuItemTemplate);c=b.topMenu.length,""===d&&""===e?f.toolbar.style.display="none":(d+="<div class='expand-toolbar'>...</div>",c++,f.topMenu.innerHTML=d,f.subMenu.innerHTML=e,f.setIconWidth(c),f.setOrientation(),a.addEventListener("resize",function(){f.setIconWidth(c),f.setOrientation()}),f.expandTarget=f.toolbar.querySelector(g.expandTargetSelector),f.setupExpand(),f.bindCallBacks(b),f.bindAutoCollapse())},parseMenuItem:function(a,b){return b.replace("{{title}}",a.title).replace("{{url}}",a.url).replace("{{iconClass}}",a.iconClass)},setIconWidth:function(b){var c=this.settings,d=document.querySelector(c.topMenuItemSelector).clientWidth,e=a.innerWidth,f=Math.floor(98*((e-b*d)/(2*b)/e)),g=document.querySelectorAll(c.topMenuItemSelector),h=document.querySelector(c.topMenuItemSelector);for(b=0;b<g.length;b++)g[b].style.marginRight=f+"%",g[b].style.marginLeft=f+"%";h&&(h.style.marginRight=f+"%",h.style.marginLeft=f+"%")},setOrientation:function(){this.toolbar.orientation=a.innerWidth<a.innerHeight?"portrait":"landscape"},bindCallBacks:function(a){var b,c=0,d=this;for(c=0;c<a.topMenu.length;c++)b=a.topMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback);for(c=0;c<a.subMenu.length;c++)b=a.subMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback)},buildTransitionValue:function(a){var b=this.settings;return a+" "+b.expandSpeed+"ms "+b.easing},setupToolbarElements:function(a,b){var c=this;c.toolbar=a,c.topMenu=c.toolbar.querySelector(b.topMenuSelector),c.subMenu=c.toolbar.querySelector(b.subMenuSelector)},applyTransitionEnd:function(){var a=this;a.toolbar.addEventListener(a.support.transitionEnd,function(b){a.transitionEnd(b)})},transitionEnd:function(){this.toolbar.style[this.support.transition]=""},setupTouch:function(){var b=this;b.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",b.hasMouse="ontouchstart"in a&&"onmousedown"in a,b.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown"},setupExpand:function(){var a=this;a.setupTouch(),a.bindTapEvent(a.expandTarget,function(b){b.preventDefault(),a.expandToolbar()})},bindAutoCollapse:function(){var a=this,b=0,c=document.querySelectorAll(a.settings.topMenuItemSelector+", "+a.settings.subMenuSelector);for(b=0;b<c.length;b++)a.bindTapEvent(c[b],function(){a.expandToolbar(!0)})},bindTapEvent:function(a,b){var c=this;a&&(a.addEventListener(c.touchStart,function(a){b.call(c,a)}),c.hasMouse&&a.addEventListener("mousedown",function(a){b.call(c,a)}))},expandToolbar:function(a){var c,d,e=this,f=e.settings,g=e.toolbar;(a!==!0||g.expanded!==b&&g.expanded!==!1)&&(g.style[e.support.transition]="portrait"===g.orientation?e.buildTransitionValue("height"):e.buildTransitionValue("width"),g.expanded?("portrait"===g.orientation?g.style.height=f.minHeight+"px":g.style.width=f.minWidth+"px",g.expanded=!1):(c=e.topMenu!==b?e.topMenu.getBoundingClientRect():{height:"0px",width:"0px"},d=e.subMenu!==b?e.subMenu.getBoundingClientRect():{height:"0px",width:"0px"},"portrait"===e.toolbar.orientation?g.style.height=c.height+d.height+"px":f.menuItems.subMenu.length>0&&(g.style.width=f.expandWidth+"px"),g.expanded=!0))},settings:{minHeight:35,minWidth:42,expandWidth:200,collapseOnSelect:!0,mainSelector:".toolbar",topMenuSelector:".toolbar-top-menu",subMenuSelector:".toolbar-sub-menu",expandTargetSelector:".expand-toolbar",topMenuItemSelector:".toolbar-item",menuItems:{topMenu:[],subMenu:[]},toolbarItemTemplate:"<div class='toolbar-item'><a href='{{url}}'><div class='toolbar-item-icon {{iconClass}}'></div><figcaption>{{title}}</figcaption></a></div>",subMenuItemTemplate:"<a href='{{url}}'><div class='toolbar-sub-menu-nav-item {{iconClass}}'>{{title}}</div></a>",expandSpeed:1e3,that:b,easing:"ease-in-out"}},c.fn.init.prototype=c.fn,a.toolbar=c}(window),function(a,b){if("object"==typeof exports&&exports)b(exports);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(this,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function f(a){this.string=a,this.tail=a,this.pos=0}function g(a,b){this.view=a||{},this.parent=b,this._cache={}}function h(){this.clearCache()}function i(b,c,d,e){for(var f,g,h,j="",k=0,l=b.length;l>k;++k)switch(f=b[k],g=f[1],f[0]){case"#":if(h=d.lookup(g),"object"==typeof h)if(v(h))for(var m=0,n=h.length;n>m;++m)j+=i(f[4],c,d.push(h[m]),e);else h&&(j+=i(f[4],c,d.push(h),e));else if("function"==typeof h){var o=null==e?null:e.slice(f[3],f[5]);h=h.call(d.view,o,function(a){return c.render(a,d)}),null!=h&&(j+=h)}else h&&(j+=i(f[4],c,d,e));break;case"^":h=d.lookup(g),(!h||v(h)&&0===h.length)&&(j+=i(f[4],c,d,e));break;case">":h=c.getPartial(g),"function"==typeof h&&(j+=h(d));break;case"&":h=d.lookup(g),null!=h&&(j+=h);break;case"name":h=d.lookup(g),null!=h&&(j+=a.escape(h));break;case"text":j+=g}return j}function j(a){for(var b,c=[],d=c,e=[],f=0,g=a.length;g>f;++f)switch(b=a[f],b[0]){case"#":case"^":e.push(b),d.push(b),d=b[4]=[];break;case"/":var h=e.pop();h[5]=b[2],d=e.length>0?e[e.length-1][4]:c;break;default:d.push(b)}return c}function k(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(c=b,d.push(b)));return d}function l(a){return[new RegExp(d(a[0])+"\\s*"),new RegExp("\\s*"+d(a[1]))]}function m(b,e){function g(){if(z&&!A)for(;y.length;)delete x[y.pop()];else y=[];z=!1,A=!1}if(b=b||"",e=e||a.tags,"string"==typeof e&&(e=e.split(o)),2!==e.length)throw new Error("Invalid tags: "+e.join(", "));for(var h,i,m,p,t,u=l(e),v=new f(b),w=[],x=[],y=[],z=!1,A=!1;!v.eos();){if(h=v.pos,m=v.scanUntil(u[0]))for(var B=0,C=m.length;C>B;++B)p=m.charAt(B),c(p)?y.push(x.length):A=!0,x.push(["text",p,h,h+1]),h+=1,"\n"==p&&g();if(!v.scan(u[0]))break;if(z=!0,i=v.scan(s)||"name",v.scan(n),"="===i?(m=v.scanUntil(q),v.scan(q),v.scanUntil(u[1])):"{"===i?(m=v.scanUntil(new RegExp("\\s*"+d("}"+e[1]))),v.scan(r),v.scanUntil(u[1]),i="&"):m=v.scanUntil(u[1]),!v.scan(u[1]))throw new Error("Unclosed tag at "+v.pos);if(t=[i,m,h,v.pos],x.push(t),"#"===i||"^"===i)w.push(t);else if("/"===i){if(0===w.length)throw new Error('Unopened section "'+m+'" at '+h);var D=w.pop();if(D[1]!==m)throw new Error('Unclosed section "'+D[1]+'" at '+h)}else if("name"===i||"{"===i||"&"===i)A=!0;else if("="===i){if(e=m.split(o),2!==e.length)throw new Error("Invalid tags at "+h+": "+e.join(", "));u=l(e)}}var D=w.pop();if(D)throw new Error('Unclosed section "'+D[1]+'" at '+v.pos);return x=k(x),j(x)}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(a){var b=this.tail.match(a);return b&&0===b.index?(this.tail=this.tail.substring(b[0].length),this.pos+=b[0].length,b[0]):""},f.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b},g.make=function(a){return a instanceof g?a:new g(a)},g.prototype.push=function(a){return new g(a,this)},g.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var d=a.split("."),e=0;b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return"function"==typeof b&&(b=b.call(this.view)),b},h.prototype.clearCache=function(){this._cache={},this._partialCache={}},h.prototype.compile=function(b,c){var d=this._cache[b];if(!d){var e=a.parse(b,c);d=this._cache[b]=this.compileTokens(e,b)}return d},h.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);return this._partialCache[a]=d,d},h.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]},h.prototype.compileTokens=function(a,b){var c=this;return function(d,e){if(e)if("function"==typeof e)c._loadPartial=e;else for(var f in e)c.compilePartial(f,e[f]);return i(a,c,g.make(d),b)}},h.prototype.render=function(a,b,c){return this.compile(a)(b,c)},a.name="mustache.js",a.version="0.7.2",a.tags=["{{","}}"],a.Scanner=f,a.Context=g,a.Writer=h,a.parse=m,a.escape=e;var x=new h;a.clearCache=function(){return x.clearCache()},a.compile=function(a,b){return x.compile(a,b)},a.compilePartial=function(a,b,c){return x.compilePartial(a,b,c)},a.compileTokens=function(a,b){return x.compileTokens(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,d,e){var f=a.render(b,c,d);return"function"!=typeof e?f:(e(f),void 0)}}),function(a,b){"use strict";a.addEventListener("resize",function(){for(var a in c)c.hasOwnProperty(a)&&c[a].call()});var c={},d=function(a,b){var c=new d.fn.init(a,b);return c.settings=$().extend({},c.settings,b),c.buildVendorNames(),c.setupElements(a),c.resizePanorama(),c.buildTransitionValue(),c.support.transitionEnd=c.eventNames[c.support.transition]||null,c.bindEvents(),c.moveRightCallback(),c.currentPanel=2,c};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.2",div:b,currentPanel:1,leftPanel:1,totalPanels:1,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},headerTransitionValue:"all 1000ms ease-in-out",transitionValue:"all 1000ms ease-in-out",fastTransition:"all 0ms",buildTransitionValue:function(){var a=this,b=(a.support,a.settings);return a.transitionValue="all "+b.speed+"ms "+b.easing,a.headerTransitionValue="all "+(b.speed-100)+"ms "+b.easing,this},buildVendorNames:function(){var a=this,b=$();a.div=document.createElement("div"),a.support.transition=b.getVendorPropertyName("transition"),a.support.transitionDelay=b.getVendorPropertyName("transitionDelay"),a.support.transform=b.getVendorPropertyName("transform"),a.support.transformOrigin=b.getVendorPropertyName("transformOrigin"),a.support.transform3d=b.checkTransform3dSupport(),a.div=null},setPanoramaDimensions:function(){var a=this,b=a.settings,c=b.panelWidth-b.peekWidth,d=(b.headerHeight,3*b.panelWidth),e=b.panelHeight-b.headerHeight-b.bottomMargin;a.container.style.height=e+"px",a.panelbody.style.height=e+"px",a.panelbody.style.width=a.totalPanels*c+"px",a.panelbody.style.left=-c+"px";for(var f=0;f<a.panels.length;f++)a.panels[f].style.width=c+"px";if(a.headerPanels.length>1){for(d=0,f=0;f<a.headerPanels.length;f++)d+=a.headerPanels[f].offsetWidth;d=1.35*d}if(a.header){var g=a.header.style;a.headerPanels&&a.headerPanels.length>0?(g.width=d+"px",g.left=-parseInt(a.headerPanels[0].offsetWidth,10)+"px"):(g.width=d+"px",g.paddingLeft=g.paddingRight=b.panelWidth+"px",g.left=a.settings.bigHeaderLeft=-a.settings.panelWidth+"px")}},clearPanoramaSettings:function(){var a=0,c=this,d=c.panelbody;if(d&&c.panels&&c.header){for(d.style.height=d.style.top=d.style.width=d.style.left=c.container.style.height="",a=0;a<c.panels.length;a++)c.panels[a].style.minHeight=c.panels[a].style.width="";c.header&&(c.header.style.width=c.headerPanels&&c.headerPanels.length>0?c.header.style.left="":c.header.style.paddingLeft=c.header.style.paddingRight=c.header.style.left=c.settings.bigHeaderLeft=""),c.container=b,c.panelbody=b,c.panels=b,c.header=b,c.headerPanels=b}},setupElements:function(a){var b=this;b.container=a?a:document.querySelector(b.settings.container),b.panelbody=document.querySelector(b.settings.container+"  "+b.settings.panoramaSelector),b.panels=document.querySelectorAll(b.settings.container+"  "+b.settings.panoramaSelector+"  "+b.settings.singleColumnSelector),b.totalPanels=b.panels.length,b.header=document.querySelector(b.settings.headerStyle),b.headerPanels=document.querySelectorAll(b.settings.headerPanelStyle)},bindEvents:function(){var a=this;a.panelbody.addEventListener(a.support.transitionEnd,function(){a.tEndCB!==b&&a.tEndCB(),a.tHeaderEndCB!==b&&a.tHeaderEndCB()}),c.resizePanorama=function(b){a.resizePanorama.call(a,b)}},resizePanorama:function(){var b=this.settings;b.windowWidth=a.innerWidth,b.panelWidth=a.innerWidth,b.panelHeight=a.innerHeight,b.maxWidth<=a.innerWidth||b.maxHeight<=a.innerHeight?(b.canMove=!1,this.clearPanoramaSettings()):(b.canMove=!0,this.setPanoramaDimensions())},tEndCB:b,tHeaderEndCB:b,moveQue:[],moving:!1,executeMove:function(){var a=this,c=a.moveQue.shift();c!==b?(a.moving=!0,a.tEndCB=c.cb,a.panelbody.style[a.support.transition]=a.transitionValue,a.panelbody.style[a.support.transform]=a.support.transform3d?"translate3D("+c.value+"px, 0, 0)":"translateX("+c.value+"px)"):a.moving=!1},movePanels:function(a,b){var c=this,d={cb:b,value:a};c.moving||(c.moveQue.push(d),c.moving||c.executeMove())},_movePrevCB:[],_moveNextCB:[],movePrevious:function(a){return a&&that._movePrevCB.push(a),this},moveNext:function(a){return a&&this._moveNextCB.push(a),this},moveLeft:function(a,b){var c=(a.target,0),d=this;for(b=b||d.settings.panelWidth-d.settings.peekWidth,d.currentPanel+=1,d.currentPanel>d.totalPanels&&(d.currentPanel=1),d.moveHeader&&d.moveHeader(!0),d.movePanels(-b,d.moveLeftCallback),c=0;c<d._moveNextCB.length;c++)d._moveNextCB[c]&&d._moveNextCB[c].call(d.currentPanel)},moveRight:function(a,b){var c=(a.target,0),d=this;for(b=b||d.settings.panelWidth-d.settings.peekWidth,d.currentPanel-=1,d.currentPanel<1&&(d.currentPanel=d.totalPanels),d.moveHeader&&d.moveHeader(!0),d.movePanels(b,d.moveRightCallback),c=0;c<d._movePrevCB.length;c++)d._movePrevCB[c]&&d._movePrevCB[c].call(d.currentPanel)},moveLastPanel:function(){var a=this,b=a.panelbody,c=b.childNodes;b.style[a.support.transition]=a.fastTransition,b.appendChild(a.getFirstPanel(c)),b.style[a.support.transform]=""},moveLeftCallback:function(a){a=a||this.panelbody;var b=this,c=a.childNodes;a.style[b.support.transition]=b.fastTransition,a.appendChild(b.getFirstPanel(c)),a.style[b.support.transform]="",b.moving=!1,b.executeMove()},moveRightCallback:function(a){a=a||this.panelbody;var b=this,c=a.childNodes;a.style[b.support.transition]=b.fastTransition,a.insertBefore(b.getLastPanel(c),a.firstChild),a.style[b.support.transform]="",b.moving=!1,b.executeMove()},getFirstPanel:function(a){var b;for(b=0;b<a.length;b++)if(1===a[b].nodeType)return a[b]},getLastPanel:function(a){var b;for(b=a.length-1;0!==b;b--)if(1===a[b].nodeType)return a[b]},moveCallback:function(a,b){this.movePanels(b,this.moveLeftCallback)},destroy:function(){delete c.resizePanorama},container:b,panelbody:b,panels:b,header:b,headerPanels:b,bigHeaderTrans:0,settings:{panoramaSelector:".panorama-panels",container:".panorama-container",singleColumnSelector:".single-panel",doubleColumnSelector:".double-panel",speed:150,windowWidth:a.innerWidth,panelWidth:a.innerWidth,panelHeight:a.innerHeight,peekWidth:35,easing:"ease-in-out",nextScroll:".panorama-next",prevScroll:".panorama-prev",navWrapper:".panorama-navigation",showPrevNext:!1,headerSlide:.2,bigHeaderLeft:0,headerStyle:".panorama-header",headerPanelStyle:".panorama-panel-header",headerHeight:40,bottomMargin:35}},d.fn.init.prototype=d.fn,a.panorama=d}(window),function(a,b){"use strict";var c=c||b,d=function(b){var c=new d.fn.init;return c.settings=$().extend({},c.settings,b),c.bp=c.settings.bp||backpack(),c.titleElement=document.querySelector(c.settings.titleSelector),c.settings.parseDOM&&c.setupRoutes(c.settings.viewSelector),a.addEventListener("hashchange",function(){c.swapView()}),c.getParameterByName(c.settings.forceReload)?(a.location.replace(a.location.href.split("?")[0]+"#!"+c.getParameterByName(c.settings.forceReload)),c):(c.settings.initView&&c.swapView(),c)};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.4",bp:b,setupRoutes:function(){for(var a,b,c,d,e=this,f=e.settings,g=$(),h=g.extend(g.parseLocalStorage("routes")||{},f.routes),i=0,j=document.querySelectorAll(f.viewSelector);i<j.length;i++)b=j[i],b.hasAttributes()&&b.hasAttribute("id")&&(d=b.getAttribute("id"),a=b.hasAttribute("data-route")?b.getAttribute("data-route"):"",c=e.createRoute(d,a,b),h[c.path]=c);e.settings.routes=h,localStorage.setItem("routes",JSON.stringify(h)),e.bp&&""===e.getParameterByName("_escaped_fragment_")&&e.bp.updateViews(f.viewSelector)},createRoute:function(a,c,d){return{viewId:a,viewModule:d.hasAttribute("data-module")?d.getAttribute("data-viewId"):a,path:c.split("\\:")[0],params:c.split("\\:").slice(1),title:d.hasAttribute("data-title")?d.getAttribute("data-title"):this.settings.defaultTitle,transition:d.hasAttribute("data-transition")?d.getAttribute("data-transition"):"",paramValues:{},onload:d.hasAttribute("data-onload")?d.getAttribute("data-onload"):b,unload:d.hasAttribute("data-unload")?d.getAttribute("data-unload"):b}},matchRouteByPath:function(a,c){c||(c=this.settings.routes);var d,e,f,g,h,i={};if(c.hasOwnProperty(a))return c[a];for(d in c)if(c.hasOwnProperty(d)){if(e=c[d],h=new RegExp("\\b"+e.path+"\\b","gi"),""!==e.path&&0===a.search(h)){for(f=a.replace(e.path,"").split("/").slice(1),g=0;g<f.length;g++)i[e.params[g]]=f[g];e.paramValues=i;break}e=b}return e},matchRouteById:function(a,b){b||(b=this.settings.routes);var c;for(c in b)if(b[c].viewId===a)return b[c]},animation:b,getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},getVendorPropertyName:function(a){var b,c,d=["Moz","Webkit","O","ms"],e=a.charAt(0).toUpperCase()+a.substr(1);if(a in this.div.style)return a;for(c=0;c<d.length;++c)if(b=d[c]+e,b in this.div.style)return b},transitionend:{animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd"},cssPrefix:function(a){if(!a)return"";var b,c,d,e,f=document.body.style;if(a.indexOf("-")>=0){for(d=(""+a).split("-"),b=1,c=d.length;c>b;b++)d[b]=d[b].substr(0,1).toUpperCase()+d[b].substr(1);a=d.join("")}if(a in f)return a;for(a=a.substr(0,1).toUpperCase()+a.substr(1),e=["webkit","Moz","ms","O"],b=0,c=e.length;c>b;b++)if(e[b]+a in f)return e[b]+a;return""},removeExtraViews:function(a){for(var b=a.length;b>1;)b--,a[b].parentNode.removeChild(a[b])},pushGA:function(a){c!==b&&c.push(["_trackPageview",a])},swapView:function(){var c,d,e,f,g=this,h=g.settings,i=a.location.hash,j=g.getParameterByName("_escaped_fragment_"),k="#"!==i?i.replace("#!",""):"",l=k.split(":")[0],m=document.querySelectorAll("."+h.currentClass);m.length&&g.removeExtraViews(m),m=m[0],m&&m.id&&(d=g.matchRouteById(m.id)),c=g.matchRouteByPath(l),e=g.getAnimation(c),g.animation=e,c!==b?(g.pushGA(l),g.ensureViewAvailable(m,c.viewId),f=document.getElementById(c.viewId),f&&(m&&g.hasAnimations()&&e&&(m.addEventListener(g.transitionend[g.cssPrefix("animation")],function(){g.endSwapAnimation.call(g,d),m=b}),$(m).addClass("animated out "+e).removeClass("in")),$(f).addClass(h.currentClass+" animated "+e+" in"),g.setDocumentTitle(c),c&&g.makeCallback(c,"onload"))):""===j?a.location.hash="#!"+h.NotFoundRoute:f=$(h.viewSelector).addClass(h.currentClass)},getAnimation:function(a){return a?this.animations[a.transition]||this.settings.viewTransition:this.settings.viewTransition},endSwapAnimation:function(a){var b,c=this,d=document.querySelector(".current.out"),e=document.querySelector(".current.in"),f=c.animation;a&&c.makeCallback(a,"unload"),e.classList.contains("in")&&(e.classList.remove("in"),e.classList.remove(f)),d&&c.bp&&d.parentNode&&(b=d.parentNode,b.removeChild(d))},ensureViewAvailable:function(b,c){if(this.bp){var d,e,f=this.bp.getViewData(c);f?d=this.createFragment(f.content):(e=a.location.href.split("#!"),a.location.replace(e[0]+"?"+this.settings.forceReload+"="+e[1])),b?b.parentNode.insertBefore(d,b):document.querySelector(this.settings.mainWrappperSelector).appendChild(d)}},makeCallback:function(b,c){var d,e,f,g=this,h=g.settings;if(c&&!b[c]){var i=h.appContext;return h.appContext&&i[b.viewModule]&&i[b.viewModule][c]&&i[b.viewModule][c].call(i,b.paramValues||{}),void 0}for(e=b[c].split("."),f=a[e[0]],d=1;d<e.length;d++)1===d&&(g=f),f=f[e[d]];f&&f.call(g,b.paramValues||{})},setDocumentTitle:function(a){var b,c=a.title;if(""!==c){for(b=0;b<a.params.length;b++)c=c.replace(":"+a.params[b],a.paramValues[a.params[b]]);document.title=c}},createFragment:function(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b},hasAnimations:function(){var a=!1,c=document.createElement("div"),d="animation",e="",f="Webkit Moz O ms Khtml".split(" "),g="",h=0;if(c.style.animationName&&(a=!0),a===!1)for(h=0;h<f.length;h++)if(c.style[f[h]+"AnimationName"]!==b){g=f[h],d=g+"Animation",e="-"+g.toLowerCase()+"-",a=!0;break}return a},storeAsyncContent:function(a){this.bp.updateViewsFromFragment(this.settings.viewSelector,a)},animations:{slide:"slide",fade:"fade",flip:"flip"},settings:{routes:[],viewSelector:".content-pane",currentClass:"current",mainWrappperSelector:"main",NotFoundView:"nofoundView",NotFoundRoute:"404",defaultTitle:"A Single Page Application with Routes",titleSelector:".view-title",forceReload:"_force_reload_",autoSetTitle:!0,parseDOM:!0,initView:!0,viewTransition:"slide",asyncUrl:b}},d.fn.init.prototype=d.fn,a.spa=d}(window),function(a,b){"use strict";var c=function(a){var b=new c.fn.init;return b.settings=$().extend({},b.settings,a),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",hasOnLine:"onLine"in navigator,onLine:navigator.onLine,ajaxSettings:{cache:!1,dataType:"json",method:"get",type:"json",contentType:"application/json",localCache:!0,cacheTTL:5,isCacheValid:function(){return!0},success:function(){}},serialize:function(a){var b,c=[];for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")},ajaxPrefilter:function(c){if(!a.localStorage||!c.localCache)return this.doAJAX(c),void 0;var d,e=this,f=c.cacheTTL||5,g=a.localStorage,h=c.dataType||c.type,i=c.cacheKey||c.url.replace(/jQuery.*/,"")+c.type+(c.data?e.serialize(c.data):""),j=g.getItem(i+"-cachettl");return(d=e.getExistingData({isCacheValid:c.isCacheValid,ttl:j,cacheKey:i}))?((0===h.indexOf("json")||0===h.indexOf("jsonp"))&&(d=JSON.parse(d)),c.success(d),void 0):(c.success&&(c.realsuccess=c.success),c.success=function(a){if(b===a)return c.realsuccess&&c.realsuccess(a),void 0;var d=a;(0===h.indexOf("json")||0===h.indexOf("jsonp"))&&(d=JSON.stringify(a)),e.saveResultToStorage(i,d,j,f),c.realsuccess&&c.realsuccess(a)},this.doAJAX(c),void 0)},saveResultToStorage:function(b,c,d,e){var f=a.localStorage;try{f.setItem(b,c),d&&"expired"!==d||f.setItem(b+"cachettl",+new Date+36e5*e)}catch(g){f.removeItem(b),f.removeItem(b+"cachettl"),options.cacheError&&options.cacheError(g,b,c)}},getExistingData:function(a){var b=a.ttl,c=a.cacheKey;return a.isCacheValid&&!a.isCacheValid()&&localStorage.removeItem(c),b&&b<+new Date&&(localStorage.removeItem(c),localStorage.removeItem(c+"cachettl"),b="expired"),localStorage.getItem(c)},failCallback:function(a){a.responseText&&console.error(JSON.stringify(a.responseText))},doAJAX:function(a){var b=this;reqwest(a).fail(function(a){b.failCallback(a)})},getJSONP:function(a,b){var c=$().extend({},this.ajaxSettings,b,{url:a,type:"jsonp"});return this.ajaxPrefilter(c)},getData:function(a,b){var c=$().extend({},this.ajaxSettings,b,{url:a});return"jsonp"===b.type&&(delete c.contentType,delete c.dataType),this.ajaxPrefilter(c)},postData:function(a){var b=$().extend({},this.ajaxSettings,{type:"POST"},a.ajaxSettings,{url:a.url});return reqwest(b).fail(function(a){that.failCallback(a)})}},c.fn.init.prototype=c.fn,a.rqData=c}(window),function(a,b){"use strict";var c={topMenu:[{title:"home",iconClass:"home-icon",url:"#!"},{title:"map",iconClass:"maps-icon",url:"#!maps"},{title:"search",iconClass:"search-icon",url:"#!search"},{title:"about",iconClass:"about-icon",url:"#!about"}],subMenu:[{title:"opening this week",url:"#!movies/Opening"},{title:"in theaters",url:"#!movies/InTheaters"},{title:"top box office",url:"#!movies/TopBoxOffice"},{title:"comming soon",url:"#!movies/ComingSoon"},{title:"privacy",url:"#!privacy"}]},d=function(a){return new d.fn.init(a)};return d.fn=d.prototype={constructor:d,init:function(b){var d=this;return d.settings=$().extend({},d.settings,b),d.bp=d.settings.bp||backpack(),d.tmpl=d.settings.tmpl||Mustache,d.movieData=d.settings.movieData||movieData(RottenTomatoes({data:data}),fakeTheaters()),d.compileTemplates(),toolbar(".toolbar",{menuItems:c}),d.setupHamburger(),d.bindBackButton(),a.addEventListener("resize",function(){requestAnimationFrame(function(){for(var a in d.resizeEvents)d.resizeEvents.hasOwnProperty(a)&&d.resizeEvents[a].call(d)})}),d},setupHamburger:function(){deeptissue(".hamburger-nav").tap(function(){requestAnimationFrame(function(){$(".main-nav").show()})}),deeptissue(".main-nav > a").tap(function(b){b.stopPropagation(),b.preventDefault();var c=b.currentTarget,d="seleted-nav";c.classList.add(d),requestAnimationFrame(function(){c.href&&(a.location.href=c.href),c.classList.remove(d),document.querySelector(".main-nav").style.display="none"})}),deeptissue(document.body).tap(function(){$(".main-nav").hide()})},version:"0.0.2",noResults:"<div class='no-results'>Sorry There are No Results Available</div>",mainTitle:document.querySelector(".view-title"),movieTypes:{Opening:"Opening",TopBoxOffice:"Top Box Office",CommingSoon:"Comming Soon",InTheaters:"In Theaters"},setMainTitle:function(a){this.mainTitle.textContent=a.toLowerCase()},bindBackButton:function(){deeptissue(document.querySelector(".win-backbutton")).tap(function(){a.history.back(1)})},bp:b,tmpl:b,movieData:b,templates:{},compileTemplates:function(){var a,b=this,c=b.bp.getTemplates(!0);for(a in c)this.templates[a]=b.tmpl.compile(c[a])},showLoading:function(a){"string"==typeof a&&(document.querySelector(a).innerHTML="<img class='ajax-loading' src='http://images.professionalaspnet.com/ajax-loader.gif'/>")},mergeData:function(a,c,d){if("string"!=typeof a||"string"!=typeof c||d===b||null===d)return console.error("missing argument in mergeData"),void 0;var e=this,f=document.querySelector(a);f.length&&f.length>0&&(f=f[0]),e.templates[c]&&requestAnimationFrame(function(){f.innerHTML=e.templates[c](d)})},resizeEvents:{},setMoviePanelWidth:function(b,c){b=b||".movie-poster-div",c=c||10;var d=document.querySelector(b),e=a.innerWidth,f=473,g=205;d&&(e>1024?(e=f+Math.floor(c/2)*g,d.style.width=e+"px"):e>600&&(e=Math.ceil(c/2)*g,d.style.width=e+"px"))},panorama:b,_panoramaSetup:!1,hasTouch:a.navigator.msPointerEnabled||"ontouchstart"in a,setupPanorama:function(b,c){b=b||".panorama-container",c=$().extend({maxHeight:Number.MAX_VALUE,maxWidth:Number.MAX_VALUE},c);var d,e=this,f=document.querySelector(b);e.panorama=panorama(f,$().extend(c,{speed:600,headerHeight:80,peekWidth:50})),d=deeptissue(f,{swipeRightThreshold:50,swipeLeftThreshold:-50,swipeUpThreshold:50,swipeDownThreshold:50}),d.swipeRight(function(b){c.maxWidth>=a.innerWidth&&e.panorama.moveRight(b)}).swipeLeft(function(b){c.maxWidth>=a.innerWidth&&e.panorama.moveLeft(b)})},setPanoramaWings:function(){var a=document.querySelector(".pxs_navigation");a&&(a.style.display="block")},settings:{desktopBreakPoint:1024,smallBreakPoint:600,SearchCount:50}},d.fn.init.prototype=d.fn,a.movieApp=d}(window),function(a){"use strict";movieApp.fn.setPosterSrc=function(b){var c,d=0,e=document.querySelectorAll(b||".movie-grid-poster"),f=a.innerWidth,g=600,h=1024;
for(d=0;d<e.length;d++)c=e[d],c.src=0===d&&f>=h?c.src.replace("pro","ori").replace("det","ori"):f>=g?c.src.replace("pro","det").replace("ori","det"):c.src.replace("ori","pro").replace("det","pro")}}(window),function(a,b){"use strict";movieApp.fn.homeView={onload:function(){var a=this,b=a.homeView;b.isVisible=!0,a.setupPanorama(),a.setMainTitle("Modern Web Movies"),b.loadMovies.call(a),requestAnimationFrame(function(){a.panorama.resizePanorama()}),b.setupMQLs.call(a,b)},mql600:b,mql1024:b,isVisible:!1,setupMQLs:function(b){var c=this;b.mql600||(b.mql600=a.matchMedia("(min-width: 600px)"),b.mql600.addListener(function(a){b.updateMoviePosters.call(c,a)})),b.mql1024||(b.mql1024=a.matchMedia("(min-width: 1024px)"),b.mql1024.addListener(function(a){b.updateMoviePosters.call(c,a)}))},loadMovies:function(){var a=this,b=a.movieData,c=a.homeView;b.InTheatersMovies.call(b,50,1,function(b){c.renderHomeMovies.call(a,".top-box-list",b)}),b.OpeningMovies.call(b,50,1,function(b){c.renderHomeMovies.call(a,".opening-movie-list",b)}),b.TopBoxOfficeMovies.call(b,50,1,function(b){c.renderHomeMovies.call(a,".movies-near-me-list",b)}),b.ComingSoonMovies.call(b,50,1,function(b){c.renderHomeMovies.call(a,".coming-soon-list",b)})},updateMoviePosters:function(){if(this.homeView.isVisible){var a=this;a.setPosterSrc.call(a,".opening-movie-list .movie-grid-poster"),a.setPosterSrc.call(a,".top-box-list .movie-grid-poster"),a.setPosterSrc.call(a,".coming-soon-list .movie-grid-poster"),a.setPosterSrc.call(a,".movies-near-me-list .movie-grid-poster")}},unload:function(){this.homeView.isVisible=!1},renderHomeMovies:function(a,b){if(b){var c=this;c.mergeData(a,"MoviePosterGridTemplate",b),requestAnimationFrame(function(){c.setPosterSrc(a+" .movie-grid-poster")})}}}}(window),function(a){"use strict";movieApp.fn.mapsView={onload:function(){var a=this,b=a.mapsView;a.setMainTitle("theaters near you"),$().loadScript("bing-map-script","http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0",function(){b.loadNearbyTheaters.call(a)},"head")},loadNearbyTheaters:function(){var a,b,c=this,d=c.mapsView,e=[],f="Ai2HABTSdPR3baDe6yPjFDNRac3RsbaFMjUb2d-OjlQd8o3vO2DcqRxBpDgRTuUD";navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(g){for(a=new Microsoft.Maps.Map(document.getElementById("nearbyMap"),{credentials:f,center:new Microsoft.Maps.Location(g.coords.latitude,g.coords.longitude),mapTypeId:Microsoft.Maps.MapTypeId.road,showScalebar:!1,showDashboard:!1,zoom:12}),e=c.movieData.nearbyTheaters(g.coords.latitude,g.coords.longitude),b=0;b<e.length;b++)d.AddPushpin.call(c,g,a,e[b])})},AddPushpin:function(a,b,c){var d=this,e=d.mapsView,f=new Microsoft.Maps.Pushpin({latitude:c.latitude,longitude:c.longitude});Microsoft.Maps.Events.addHandler(f,"click",function(){e.goToTheaterFromMap(c.name)}),b.entities.push(f)},goToTheaterFromMap:function(b){a.location.hash="#!theater/"+b}}}(window),function(a,b){"use strict";function c(a){return document.querySelector(a)}function d(){return{st:c(e),cn:c(f),md:c(g),stt:c(h),cnt:c(i),mdt:c(j),sr:c(k)}}var e=".movie-showtime-list",f=".cast-name-list",g=".movie-description",h=".movie-showtimes-panel > .panel-title",i=".movie-cast-panel > .panel-title",j=".movie-description-panel > .panel-title",k="#showReview",l=".movie-review-panel",m=".movie-details-panel",n=".movie-cast-panel",o=".movie-showtimes-panel",p=".movie-description-panel",q=610,r=820,s=1024;movieApp.fn.movieView={onload:function(a){if(!a||!a.id)return this.showError("No Movie Id Requested"),void 0;var b=this,c=b.movieData,d=this.movieView;c.loadMovieDetails.call(c,a.id,function(a){a&&d.renderMovieDetails.call(b,a)})},renderMovieDetails:function(b){if(b){b.id||(a.location.hash="#!404");var c=this,d=c.movieView,h=a.innerWidth;c.mergeData(m,"movieDetailsPosterTemplate",b),c.mergeData(g,"movieDetailsDescriptionTemplate",b),c.mergeData(f,"movieDetailsCastTemplate",b),c.mergeData(e,"MovieShowtimeTemplate",b),c.setMainTitle(b.title),d.bindPanelTitles.call(c),d.setupMQLs.call(c,d),d.bindValidation(),c.setupPanorama(".panorama-container",{maxWidth:q}),document.reviewForm.onsubmit=d.reviewSubmit,requestAnimationFrame(function(){q>h?d.renderSmallScreen.call(c):h>=q&&r>=h?d.renderMiniTablet.call(c):d.renderFullScreen.call(c),d.setMoviePoster()})}},logInvalidState:function(a){console.info("id: "+a.target.id+"\r\n"+"valid: "+a.target.validity.valid+"\r\n"+"patternMismatch: "+a.target.validity.patternMismatch+"\r\n"+"rangeOverflow: "+a.target.validity.rangeOverflow+"\r\n"+"rangeUnderflow: "+a.target.validity.rangeUnderflow+"\r\n"+"typeMismatch: "+a.target.validity.typeMismatch+"\r\n"+"stepMismatch: "+a.target.validity.stepMismatch+"\r\n"+"tooLong: "+a.target.validity.tooLong+"\r\n"+"valueMissing: "+a.target.validity.valueMissing+"\r\n"+"customError: "+a.target.validity.customError+"\r\n"+"validationMessage : "+a.target.validationMessage+"\r\n")},bindValidation:function(){var a=this,b=document.querySelectorAll("input, textarea");[].forEach.call(b,function(b){b.addEventListener("invalid",function(b){a.logInvalidState(b)},!1),b.addEventListener("blur",function(b){a.logInvalidState(b)},!1)})},reviewSubmit:function(a){if(a.preventDefault(),this.checkValidity()||(a.preventDefault(),console.info("not valid")),a.srcElement)for(var b=0,c={},d=a.srcElement.querySelectorAll("input, textarea");b<d.length;b++)c[d[b].name]=d[b].value,console.info(d[b].name+" "+d[b].value);return!1},mql610:b,mql820:b,mql1024:b,setupMQLs:function(b){var c=this;b.mql610||(b.mql610=a.matchMedia("(min-width: 610px)"),b.mql610.addListener(function(d){d.matches?b.renderMiniTablet.call(c):b.renderSmallScreen.call(c),b.setMoviePoster(a.innerWidth)})),b.mql820||(b.mql820=a.matchMedia("(min-width: 820px)"),b.mql820.addListener(function(d){d.matches?b.renderFullScreen.call(c):b.renderMiniTablet.call(c),b.setMoviePoster(a.innerWidth)})),b.mql1024||(b.mql1024=a.matchMedia("(min-width: 1024px)"),b.mql1024.addListener(function(){b.setMoviePoster(a.innerWidth)}))},bindPanelTitles:function(){var b=this;$(g).show(),deeptissue(j).tap(function(){var c=a.innerWidth;c>q&&r>c&&b.movieView.displayDescription()}),deeptissue(i).tap(function(){var c=a.innerWidth;c>q&&r>c&&b.movieView.displayCastNames()}),deeptissue(h).tap(function(){var c=a.innerWidth;c>q&&r>c&&b.movieView.displayShowtimes()}),deeptissue(k).tap(function(){b.movieView.displayReview.call(b)})},boundCancel:!1,displayReview:function(){var a=this;c(l).style.display="block",c(m).style.display="none",c(n).style.display="none",c(o).style.display="none",c(p).style.display="none",document.getElementById("ReviewerName").focus(),a.movieView.boundCancel||(deeptissue(".review-cancel").tap(function(b){b.stopPropagation(),b.preventDefault(),a.movieView.hideReview()}),a.movieView.boundCancel=!0)},hideReview:function(){c(l).style.display="none",c(m).style.display="block",c(n).style.display="block",c(o).style.display="block",c(p).style.display="block"},displayShowtimes:function(){var a=d();a.st.style.display="block",a.sr.style.display="block",a.cn.style.display="none",a.md.style.display="none",a.st.style.position="relative",a.st.style.left="-260px",a.sr.style.position="relative",a.sr.style.left="-200px",a.sr.style.top="30px",a.stt.classList.add("selected"),a.cnt.classList.remove("selected"),a.mdt.classList.remove("selected")},displayCastNames:function(){var a=d();a.st.style.display="none",a.sr.style.display="none",a.cn.style.display="block",a.md.style.display="none",a.cn.style.position="relative",a.cn.style.left="-130px",a.stt.classList.remove("selected"),a.cnt.classList.add("selected"),a.mdt.classList.remove("selected")},displayDescription:function(){var a=d();a.st.style.display="none",a.sr.style.display="none",a.cn.style.display="none",a.cn.style.position="",a.cn.style.left="",a.md.style.display="block",a.stt.classList.remove("selected"),a.cnt.classList.remove("selected"),a.mdt.classList.add("selected")},clearMiniTablet:function(){var a=d();a.st.style.display="block",a.sr.style.display="block",a.cn.style.display="block",a.md.style.display="block",a.st.style.position="",a.st.style.left="",a.sr.style.position="",a.sr.style.left="",a.sr.style.top="",a.stt.classList.remove("selected"),a.cnt.classList.remove("selected"),a.mdt.classList.remove("selected")},renderSmallScreen:function(){this.movieView.clearMiniTablet(),c(k).style.display="none",c(e).style.display="block",c(l).style.display="block",c(f).style.display="block"},renderMiniTablet:function(){$(k).hide(),$(g).show(),$(e).hide(),$(l).hide(),$(f).hide();for(var a=0,b=c(".panorama-panels"),d=document.querySelectorAll(".single-panel");a<d.length;a++)d[a].style.width="";b.style.width="",b.style.height="",b.style.left=""},renderFullScreen:function(){this.movieView.clearMiniTablet(),c(e).style.display="block",c(l).style.display="",c(f).style.display="block"},setMoviePoster:function(){var b=a.innerWidth,d=c(".full-movie-poster");d&&(d.src=b>s?d.src.replace("pro","ori").replace("det","ori"):d.src.replace("pro","det").replace("ori","det"))}}}(window),function(a){movieApp.fn.moviesView={onload:function(a){var b=this,c=b.movieData,d=b.moviesView,e=a.movieType||"TopBoxOffice";c[e+"Movies"].call(c,50,1,function(a){d.renderMovies.call(b,a)}),b.setMainTitle(b.movieTypes[e])},renderMovies:function(b){if(b){var c=this;c.setMoviePanelWidth(".movie-poster-div",b.movies.length),a.addEventListener("resize",function(){c.setMoviePanelWidth(".movie-poster-div",b.movies.length),c.setPosterSrc(".movie-grid-poster")}),c.mergeData(".movie-poster-div","MoviePosterGridTemplate",b),requestAnimationFrame(function(){c.setPosterSrc(".movie-grid-poster")})}}}}(window),function(a){"use strict";movieApp.fn.searchView={onload:function(a){var b=this,c=b.searchView,d=document.getElementById("searchTerm");d.value="",document.movieSearch.addEventListener("keypress",function(a){c.searchKeyCheck.call(b,a)}),d.addEventListener("focus",b.manageSearchIcons),d.addEventListener("blur",b.manageSearchIcons),c.searchForMovies.call(b,a.term),b.setMainTitle("Search")},searchForMovies:function(b){var c=this,d=c.movieData,e=b||document.getElementById("searchTerm").value;""!==e&&d.SearchMovies.call(d,c.settings.SearchCount,1,e,function(b){b&&b.total>0&&b.movies?(document.querySelector(".movie-poster-div").innerHTML="",document.querySelector(".xy-scroller-wrapper").scrollLeft=0,c.mergeData(".movie-poster-div","MoviePosterGridTemplate",b),c.setMoviePanelWidth(".movie-poster-div",b.movies.length),requestAnimationFrame(function(){c.setPosterSrc(".movie-grid-poster")}),a.addEventListener("resize",function(){c.setMoviePanelWidth(".movie-poster-div",b.movies.length),c.setPosterSrc(".movie-grid-poster")})):document.querySelector(".movie-poster-div").innerHTML=c.noResults})},searchKeyCheck:function(a){a=a||event;var b=this,c=b.searchView,d=a.target||a.srcElement,e=/textarea/i.test(d.tagName),f=a.keyCode||a.which||a.charCode||0,g=e||13!==f;return g?!1:(c.manageSearchIcons.call(b),13===f&&(a.preventDefault(),c.searchForMovies.call(b)),!1)},manageSearchIcons:function(){var a=document.getElementById("searchTerm"),b=document.querySelector(".search-input-icon");""!=a.value?(a.style.width="100%",b.style.display="none"):(b.style.display="inline-block",a.style.width="")}}}(window),function(a){"use strict";var b=function(a){return new b.fn.init(a)};return b.fn=b.prototype={constructor:b,init:function(a){return this.data=a,this},foo:function(){console.info("and we were kung fu fighting, but privately ;)")},onload:function(){console.log("load privacyView"),this.setMainTitle("Privacy Policy")},unload:function(){console.log("unload privacyView")}},b.fn.init.prototype=b.fn,a.privacyView=b}(window,movieApp),function(){"use strict";movieApp.fn.theaterView={onload:function(a){var b=this,c=b.theaterView,d=".movie-showtime-date";b.setMainTitle(decodeURIComponent(a.theaterName)),b.movieData.InTheatersMovies(50,1,function(a){c.renderTheaterMovies.call(b,a)}),deeptissue(d).tap(function(a){$(d).removeClass("selected"),a.currentTarget.classList.add("selected"),b.movieData.InTheatersMovies(50,1,function(a){c.renderTheaterMovies.call(b,a)})})},renderTheaterMovies:function(a){if(a){var b=this;b.mergeData(".movie-showtimes-wrapper","MovieStartTimesTemplate",a),document.querySelector(".movie-showtimes-scroller").scrollTop=0}}}}();var bp=backpack(),data=rqData(),movie;movieApp.fn.privacyView=privacyView(data),movie=movieApp({bp:bp,tmpl:Mustache,movieData:movieData(RottenTomatoes({data:data}),fakeTheaters())}),_spa=spa({appContext:movie,bp:bp,defaultPage:"homeview",viewWrapper:"#main",viewTransition:"slide",defaultTitle:"Modern Web Movies"});